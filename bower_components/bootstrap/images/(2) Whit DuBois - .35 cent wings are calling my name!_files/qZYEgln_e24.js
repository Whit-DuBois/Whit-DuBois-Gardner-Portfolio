if (self.CavalryLogger) { CavalryLogger.start_js(["FbO8W"]); }

__d('BuddyListNub',['csx','cx','fbt','Arbiter','AsyncRequest','AvailableList','BootloadedComponent.react','ChannelConnection','ChatOptions','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','ChatVisibility','CSS','Dock','DOM','Event','intlNumUtils','JSLogger','JSResource','KeyEventController','Keys','NubController','OrderedFriendsList','Parent','PresencePrivacy','PresenceStatus','PresenceUtil','React','ReactDOM','Run','SidebarType','Style','Toggler','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=40,n=253,o='285px',p=c('JSLogger').create('buddylist_nub');k=babelHelpers.inherits(q,c('NubController'));l=k&&k.prototype;function q(r,s,t,u){'use strict';l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c('DOM').find(r,'a.fbNubButton');this.unreadCount=c('DOM').find(r,"span._5ayx");this.label=c('DOM').find(r,'span.label');this.body=c('DOM').scry(r,'div.fbNubFlyoutBody')[0];this.container=c('Parent').bySelector(r,"._56ox");var v=c('DOM').find(r,'div.fbNubFlyoutTitlebar');c('Toggler').createInstance(v).setSticky(false);c('Toggler').createInstance(r).setSticky(true);if(u)c('Run').onAfterLoad(function(){this.dropdown=c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function w(){},sidebarType:c('SidebarType').BUDDYLIST}),u);}.bind(this));s.subscribeOnce('render',this.flyoutContentChanged.bind(this));c('Run').onAfterLoad(function(){var w=c('DOM').find(v,"div._4k48");if(w)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),w);var x=c('DOM').find(this.button,"div._1us9");if(x)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),x);var y=c('DOM').find(this.button,"div._1usa");if(y)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function z(){},sidebarType:c('SidebarType').BUDDYLIST_NUB}),y);}.bind(this));s.setScrollContainer(this.body);c('AvailableList').subscribe('buddylist/availability-changed',this._updateCount.bind(this));c('Arbiter').subscribe('chat/connect',function(){return this._handleConnect(true);}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(w,x){if(x.name=='hide_groups'){this.onResize();}else if(x.name==='hide_buddylist')x.value?this.hide():this.show();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').CONNECTED,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').SHUTDOWN,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').RECONNECTING,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],function(){return this._updateView();}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));c('Event').listen(r,'keydown',this._onKeyDown.bind(this));c('Event').listen(this.button,'click',this.onButtonClick.bind(this));c('KeyEventController').registerKey('q',function(event){if(!this._isOpen){this.onButtonClick();this.show();}event.prevent();}.bind(this));c('Arbiter').subscribe('minisidebar/show',this.hide.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(w,x){if(x){this.hide();}else this._onSidebarHide();}.bind(this));c('Style').set(this.body,'min-height',o);c('Arbiter').subscribe('sidebar/typeahead/active',function(w,x){if(x){this._typeaheadActive=true;c('CSS').hide(this.body.parentNode);this.orderedList.hide();this.onResize();}else{this._typeaheadActive=false;this.onResize();c('CSS').show(this.body.parentNode);this.orderedList.show();}}.bind(this));c('OrderedFriendsList').getList(function(w){if(c('ChatSidebarStore').isEnabled()&&c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&w.length>0)this.show();c('Event').listen(v,'click',function(x){if(c('CSS').matchesSelector(x.target,".titlebarTextWrapper"))this._syncHideBuddylist(true);}.bind(this));this._updateView();p.log('buddylist_initialized');}.bind(this));}q.prototype._handleVisibilityChange=function(){'use strict';this._updateView();if(!c('ChatVisibility').isOnline())this.hide();};q.prototype._updateView=function(r){'use strict';var s,t;if(!c('ChatVisibility').isOnline()){s=j._("{Chat} (Off)",[j.param('Chat',j._("Chat"))]);}else if(c('ChannelConnection').disconnected()){s=j._("{Chat} (Disconnected)",[j.param('Chat',j._("Chat"))]);}else{var u=c('PresenceStatus').getOnlineCount();if(u){var v=c('DOM').create('span',{className:'count'},'('+c('intlNumUtils').formatNumberWithThousandDelimiters(u)+')');s=j._({"*":"{Chat} {number-available}"},[j.param('Chat',j._("Chat")),j.param('number-available',v,[0,u])]);}else{s=j._("Chat");t=true;}}this._setPresenceIcon();this._setUnread();this._setLabel(s,t);this.buttonContentChanged();};q.prototype._setPresenceIcon=function(){'use strict';c('CSS').conditionClass(this.root,'offline',!c('ChatVisibility').isOnline()||c('ChannelConnection').disconnected());};q.prototype.onButtonClick=function(){'use strict';if(!c('ChatSidebarStore').isInitialized())return true;c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(r,s){var t=c('ChatSidebarStore').isEnabled();if(!t&&r){c('ChatSidebarActions').enable(c('SidebarType').SIDEBAR);}else c('ChatSidebarActions').show(t&&r?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype.onHide=function(){'use strict';this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();c('Arbiter').inform('buddylist/hide');};q.prototype._onKeyDown=function(event){'use strict';var r=c('Event').getKeyCode(event);if(r===c('Keys').ESC&&!c('CSS').hasClass(this.root,'menuOpened')){this.hide();return false;}else if(r==c('Keys').RETURN)c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(s,t){c('ChatSidebarActions').enable(s?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype._onSidebarHide=function(event){'use strict';c('OrderedFriendsList').getList(function(r){if(c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&r.lenth>0){this.show();}else this.hide();}.bind(this));};q.prototype.onResize=function(){'use strict';var r=!this._typeaheadActive?n:c('Dock').getMaxFlyoutHeight(this.root)-60;c('Arbiter').inform('buddyList/resized',r,c('Arbiter').BEHAVIOR_PERSISTENT);if(this._typeaheadActive){c('Style').set(this.body,'max-height','none');}else c('Style').set(this.body,'max-height',o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t);};q.prototype._showBuddyList=function(){'use strict';this._buddyListRenderSubscription=this.orderedList.subscribe('render',function(){if(c('Style').get(this.body,'height')!=o)c('Style').set(this.body,'height',o);}.bind(this));this.orderedList.show();p.bump('buddylist_show');};q.prototype._hideBuddyList=function(){'use strict';this.orderedList.hide();p.bump('buddylist_hide');};q.prototype.onShow=function(){'use strict';this._isOpen=true;if(c('ChannelConnection').disconnected()){c('ChannelConnection').reconnect();this._showBuddyList();}else c('ChatVisibility').goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false);};q.prototype._setLabel=function(r,s){'use strict';var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c('DOM').setContent(u,r);c('DOM').replace(this.label,u);this.label=u;}this.throbber&&c('CSS').conditionShow(this.throbber,!!s);};q.prototype._setUnread=function(r){'use strict';c('CSS').conditionShow(this.unreadCount,!!r);};q.prototype._updateCount=function(){'use strict';this._updateView();};q.prototype._syncHideBuddylist=function(r){'use strict';c('ChatOptions').setSetting('hide_buddylist',r,'buddylist');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({hide_buddylist:r,window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send();};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.buddylist_visible=c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST;});f.exports=q;}),null);
__d('ChatSearchSource',['requireWeak','AbstractSearchSource','AsyncRequest','CurrentUser','MercuryConfig','MercuryParticipantTypes','SearchableEntry','SearchSourceCallbackManager','ShortProfiles','TokenizeUtil','debounce','emptyFunction','isValidUniqueID'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=null;c('requireWeak')('OrderedFriendsList',function(l){j=l;});h=babelHelpers.inherits(k,c('AbstractSearchSource'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$ChatSearchSource1=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:c('TokenizeUtil').isQueryMatch,indexFn:l.indexFn});this.$ChatSearchSource2=l.queryRequests||[];this.$ChatSearchSource3=false;this.$ChatSearchSource4=c('debounce')(this.$ChatSearchSource4,100,this);}k.prototype.bootstrapImpl=function(l){c('ShortProfiles').fetchAll().done(function(){this.$ChatSearchSource3=true;this.$ChatSearchSource5();l();}.bind(this));};k.prototype.searchImpl=function(l,m,n){var o=null,p={},q=n&&n.onQueryFinished,r=n&&n.onQueryStarted;r&&r(l);var s=this.$ChatSearchSource1.search(l,function(v){if(!o){o=v;o.forEach(function(w){return p[w.getUniqueID()]=true;});}else v.forEach(function(w){var x=w.getUniqueID();if(!p[x]){o.push(w);p[x]=true;}});m(o,l);if(l.length===1&&this.$ChatSearchSource3)q&&q(l);}.bind(this),n);if(!s||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||l.length===0){q&&q(l);return;}if(l.length===1){if(this.$ChatSearchSource3)q&&q(l);return;}var t={value:l,existing_ids:o&&o.map(function(v){return v.getUniqueID();}).join(','),limit:n&&n.threadLimit},u=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(v){this.$ChatSearchSource4(t,v,function(w){this.$ChatSearchSource6(this.$ChatSearchSource7(this.$ChatSearchSource8(w)).filter(function(x){return !!x;}),l);u--;if(u===0){this.$ChatSearchSource1.setQueryStringAsExhausted(l);q&&q(l);}}.bind(this));}.bind(this),this);};k.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries();};k.prototype.$ChatSearchSource5=function(){var l=c('ShortProfiles').getCachedProfileIDs(),m=l.filter(function(o){var p=c('ShortProfiles').getNow(o);return o==c('CurrentUser').getID()||p.type===c('MercuryParticipantTypes').FRIEND||p.type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(o.toString())>-1;}),n=m.map(this.$ChatSearchSource9);if(n.length)this.$ChatSearchSource1.addLocalEntries(n);};k.prototype.$ChatSearchSource7=function(l){return l.map(this.$ChatSearchSource10,this);};k.prototype.$ChatSearchSource10=function(l,m){if(l.mercury_thread){if(!j)return null;return j.normalizeThreadEntry(l,m);}var n=l.text,o=l.uid;if(!n||!c('isValidUniqueID')(o))return null;var p=j?j.getActiveRank(o):0;if(j&&!j.contains(o))p+=m;return new (c('SearchableEntry'))({uniqueID:o,title:n,order:p,subtitle:l.subtext,type:l.render_type||l.type,photo:l.photo,uri:l.path,auxiliaryData:{isMessengerUser:l.is_messenger_user,alias:l.alias}});};k.prototype.$ChatSearchSource8=function(l){var m=l.getPayload();if(Array.isArray(m)){return m;}else if(m&&m.entries){return m.entries;}else return [];};k.prototype.$ChatSearchSource9=function(l){var m=c('ShortProfiles').getNow(l),n=l==c('CurrentUser').getID()?c('MercuryParticipantTypes').FRIEND:m.type,o=[m.additionalName,m.alternateName].concat(m.searchTokens||[]).join(' '),p=m.name,q=null;return new (c('SearchableEntry'))({uniqueID:l,title:p,order:j?j.getActiveRank(l):0,subtitle:q,keywordString:o,type:n,photo:m.thumbSrc,uri:m.uri,auxiliaryData:{isMessengerUser:m.is_messenger_user,alias:m.alias}});};k.prototype.$ChatSearchSource4=function(l,m,n,o){new (c('AsyncRequest'))(m.uri).setData(babelHelpers['extends']({},l,m.data)).setMethod('GET').setReadOnly(true).setHandler(n).setErrorHandler(o||c('emptyFunction')).setAllowCrossPageTransition(true).send();};k.prototype.$ChatSearchSource6=function(l,m){if(l.length)this.$ChatSearchSource1.addQueryEntries(l,m);};k.prototype.addLocalEntries=function(l){this.$ChatSearchSource1.addLocalEntries(l);};k.prototype.refreshData=function(){c('ShortProfiles').fetchAll();};f.exports=k;}),null);
__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions();}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0;}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m;};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p;}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});});};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.render=function(){var m=h._("New Message");return c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below')));};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTab(n);c('ChatOpenTabEventLogger').log('sidebar');m.preventDefault();};f.exports=l;}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]));};function l(){i.apply(this,arguments);}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l;}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet Connection"));if(o==null||false===navigator.onLine){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection."));}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))]));}else if(o>1000){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param('seconds',Math.floor(o/1000))]));}else return n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting..."));};function l(){i.apply(this,arguments);}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l;}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return c('React').createElement('div',null,h._("Your session has timed out. Please log in."));case c('ChannelConstants').HINT_MAINT:return o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))]));case c('ChannelConstants').HINT_CONN:default:return o?c('React').createElement('div',null,h._("Messenger is currently unavailable.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))]));}};function l(){i.apply(this,arguments);}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l;}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','MercuryConfig','MessengerEnvironment','CSS','JSLogger','LogHistory','MercurySyncConstants','PresencePrivacy','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('JSLogger').create('sidebar_sheet'),l=c('LogHistory').getInstance('sidebar_sheet'),m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4();}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false};}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new (c('SubscriptionsHandler'))();this.$ChatSidebarSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$ChatSidebarSheet3),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this.$ChatSidebarSheet4),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$ChatSidebarSheet4),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this.$ChatSidebarSheet4),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){l.log('invalid state fatal','{}');this.setState({syncStateInvalid:true,syncStateReconnecting:false});}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log('retry from invalid state','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log('recover from invalid state','{}');this.$ChatSidebarSheet6();}.bind(this)));if(c('MercuryConfig').MR4E)this.$ChatSidebarSheet1.addSubscriptions(c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_FAIL,function(){l.log('retry from faield net requests','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_RECOVER,function(){l.log('recover from failed network requests','{}');this.$ChatSidebarSheet6();}.bind(this)));};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null;}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release();};n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p='offline';q=this.$ChatSidebarSheet7();}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p='error';q=this.$ChatSidebarSheet8(o);}else if(!this.state.notifiesUserMessages&&!o){p='notice';q=this.$ChatSidebarSheet9();}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000||this.state.syncStateReconnecting)p=c('joinClasses')(p,'reconnecting');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,p)},o?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},q));};n.prototype.$ChatSidebarSheet8=function(o){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1000)this.$ChatSidebarSheet2=c('setTimeoutAcrossTransitions')(this.$ChatSidebarSheet3.bind(this,c('ChannelConnection').RECONNECTING,p-1000),1000);return c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c('ChannelConnection').reconnect();}.bind(this)});}return null;};n.prototype.$ChatSidebarSheet7=function(){return c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function o(p){k.log('sidebar_go_online');c('ChatVisibility').goOnline();}});};n.prototype.$ChatSidebarSheet9=function(){return c('React').createElement('div',null,h._("Alerts are off while you use another client to chat."));};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true});};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false});};f.exports=n;}),null);
__d('MessengerTypeaheadUtils',['fbt','ix','immutable','MercuryConfig','MercuryTypeaheadConstants','MessengerEnvironment','ReactDOM','SearchableEntry','WorkModeConfig','mapObject'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k=c('immutable').OrderedMap,l=500,m=100,n=c('WorkModeConfig').is_work_user||c('MercuryConfig').CoworkersOverGroups?[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE]:[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE],o=(j={},j[c('MercuryTypeaheadConstants').SEARCH_TYPE]={header:''},j[c('MercuryTypeaheadConstants').FRIEND_TYPE]={header:h._("Contacts")},j[c('MercuryTypeaheadConstants').FB4C_TYPE]={header:h._("Co-workers")},j[c('MercuryTypeaheadConstants').THREAD_TYPE]={header:h._("Group Conversations")},j[c('MercuryTypeaheadConstants').PAGE_TYPE]={header:h._("Businesses")},j[c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting Rooms")},j[c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE]={header:h._("Bots")},j[c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]={header:h._("More People")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){var t=[],u=[],v=[],w=[],x=[],y=[],z=[],aa=[],ba=[];r.forEach(function(ca){switch(ca.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:u.push(ca);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:v.push(ca);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:w.push(ca);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:y.push(ca);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:x.push(ca);break;case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:z.push(ca);break;case c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE:aa.push(ca);break;case c('MercuryTypeaheadConstants').SEARCH_TYPE:t.push(ca);break;case c('MercuryTypeaheadConstants').GAME_TYPE:ba.push(ca);break;}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,aa,x,ba);return t.concat(u,v,w,z,aa,y,x,ba);},sortEntriesWithoutPages:function q(r){var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:s.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return s.concat(t,u,v);},sortEntriesWithoutGroupsOrViewer:function q(r,s){var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return t.concat(u,v);},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c('MercuryTypeaheadConstants').PAGE_TYPE));s.unshift(c('MercuryTypeaheadConstants').PAGE_TYPE);}return s;},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c('MercuryTypeaheadConstants').SEARCH_TYPE;}).concat(c('MercuryTypeaheadConstants').SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u);}.bind(this)));}.bind(this));return t;},buildSingleSection:function q(r){return k([['',r]]);},buildListSections:function q(r,s,t){if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c('mapObject')(o,function(v){return babelHelpers['extends']({},v,{entries:[]});});u[c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE]=u[c('MercuryTypeaheadConstants').PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v);});return k(t.filter(function(v){return u[v].entries.length;}).map(function(v){return [u[v].header,u[v].entries];}));},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t;},areSectionsEqual:function q(r,s){if(r===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE)return s===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE||s===c('MercuryTypeaheadConstants').PAGE_TYPE;return r===s;},scrollEntryIntoView:function q(r,s){var t=c('ReactDOM').findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m){s.scrollToPosition(u+v-w,true,{duration:l});}else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l});},getMessageSearchEntry:function q(r){if(!c('MessengerEnvironment').messengerui||r.length<2)return null;return new (c('SearchableEntry'))({uniqueID:'__special_search_entry__',title:h._("Search Messages for \"{queryString}\"",[h.param('queryString',r)]),photo:i("86924"),type:c('MercuryTypeaheadConstants').SEARCH_TYPE});},_shouldHoistPages:function q(r){if(!r)return false;return !!(c('MercuryConfig').HoistAgentsKeywords&&c('MercuryConfig').HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1);}};f.exports=p;}),null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerEnvironment','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=50,k=c('MessengerEnvironment').messengerui;h=babelHelpers.inherits(l,c('ChatSearchSource'));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};function l(n){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n;}l.prototype.bootstrapImpl=function(n){c('requireWeak')('OrderedFriendsList',function(p){return p.getSearchableEntries(j,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q);}.bind(this));}.bind(this));var o=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(o,function(p){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c('MercuryParticipantTypes').FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})]);}.bind(this));i.bootstrapImpl.call(this,c('emptyFunction'));n();};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===''&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return;}p.threadLimit=c('MercuryConfig').MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p);};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c('MessengerTypeaheadUtils').getMessageSearchEntry(q);if(r){n([r].concat(p),q);}else n(p,q);}:n;};var m=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','React','TypeaheadNavigation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w;}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca]);},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba]);};v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger");return c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":''),disabled:this.props.hideResults,inputClassName:"_3rhb",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.props.onBlur,onChange:this.$MessengerSearchTypeahead3,onFocus:function(){var w;this.$MessengerSearchTypeahead4();(w=this.props).onFocus.apply(w,arguments);}.bind(this),onMouseOver:this.$MessengerSearchTypeahead4,onClick:this.$MessengerSearchTypeahead4,onSelectAttempt:this.$MessengerSearchTypeahead5,placeholder:v,presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead6,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead7,onQueryStarted:this.$MessengerSearchTypeahead8,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:p}));};t.propTypes={hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;this.setState({isLoaded:false});(w=this.props).onChange.apply(w,arguments);}.bind(this);this.$MessengerSearchTypeahead4=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(w,x){r=w;s=x;this.setState({orderable:true});}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead8=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead7=function(w){if(w===this.props.queryString)this.setState({isLoading:false,isLoaded:true});}.bind(this);this.$MessengerSearchTypeahead6=function(w){return s?s.sortEntries(w,this.props.queryString):w;}.bind(this);this.$MessengerSearchTypeahead5=function(w){var x=w.getUniqueID(),y=w.getType(),z=w.getAuxiliaryData().alias;if(z)c('MercuryVanityIDMap').set(z,c('MercuryIDs').getParticipantIDFromUserID(x));if(y===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString);}else if(y===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(x,function(aa){this.props.onSelect(aa,y);}.bind(this));}else n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(aa){this.props.onSelect(aa.thread_id,y);}.bind(this));}.bind(this);};f.exports=t;}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','ChatConfig','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','MessengerSearchTypeahead.react','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o);}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null},p;}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p});}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(o,p,q){this.setState({dropdownComponent:c('React').createElement(o,{sidebarType:p.SIDEBAR,onToggleSidebar:q.disable})});}.bind(this),'ChatTypeaheadWrapper.react');}.bind(this));}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p});}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return c('React').createElement('div',{className:!l?"squareProfile":''},c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}),c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''});}.bind(this),onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q});}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function(p,q){c('getActiveElement')().blur();if(q===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["MercuryIDs","goURI"],function(r,s){this.setState({isSearching:false,value:''});var t=r.getUserIDFromThreadID(p);s('/'+t);}.bind(this),'ChatTypeaheadWrapper.react');}else{c('FantaTabActions').openTab(p,q);c('ChatOpenTabEventLogger').logByType(q,c('ChatSidebarSections').TYPEAHEAD,p);}}.bind(this)}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"})):null);};f.exports=n;}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j,k,l){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l}),j);}};f.exports=h;}),null);
__d('FBPaymentsDialogStore',['FBPaymentsDialogActions','FBPaymentsDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c('FBPaymentsDialogActions').types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c('FBPaymentsDialogActions').types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break;}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1;};f.exports=new j();}),null);
__d('FBPaymentsDialogContainer.react',['FBPaymentsDialogStore','FBPaymentsDispatcher','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.calculateState=function(){return c('FBPaymentsDialogStore').getState();};j.getStores=function(){return [c('FBPaymentsDialogStore')];};j.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(c('FBPaymentsDialogStore'));};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('FBPaymentsDialogContainerMount',['FBPaymentsDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('FBPaymentsDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('SidebarAppTickerResizer',['cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','debounce','Event','SidebarType','SimpleDrag','TickerController','$','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){var i=1e-7,j=1,k=85,l=171,m=165,n=300,o=46,p=90,q=82,r=150;function s(t,u,v,w,x){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=w;this.$SidebarAppTickerResizer5=x;var y=parseInt(v,10);if(!isNaN(y)){if(y>k)if(y!=this.$SidebarAppTickerResizer6())v=this.$SidebarAppTickerResizer6()+'px';this.$SidebarAppTickerResizer7(y);}this.$SidebarAppTickerResizer2.style.height=v;this.$SidebarAppTickerResizer8(t,u);if(v===null)c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer9.bind(this));if(!w){this.$SidebarAppTickerResizer10();c('CSS').hide(t);}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer10.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer11.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(z,aa){if(aa)this.$SidebarAppTickerResizer12();}.bind(this));this.$SidebarAppTickerResizer13=c('debounce')(this.$SidebarAppTickerResizer9.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer13);c('Arbiter').inform('Ticker/resized');}s.prototype.$SidebarAppTickerResizer12=function(){'use strict';var t=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(t<=i)return;c('TickerController').show(this.$SidebarAppTickerResizer1);};s.prototype.$SidebarAppTickerResizer9=function(t){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer14();}.bind(this),function(){var u=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(u>Math.round(this.$SidebarAppTickerResizer15())||this.$SidebarAppTickerResizer16&&this.$SidebarAppTickerResizer16>j){var v=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,w=this.$SidebarAppTickerResizer18(0,this.$SidebarAppTickerResizer15()-v);if(!(t&&t.type==='resize'))this.$SidebarAppTickerResizer19(w);c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}}.bind(this));};s.prototype.$SidebarAppTickerResizer15=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return p;return Math.min(p,(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q)*100/this.$SidebarAppTickerResizer17);};s.prototype.$SidebarAppTickerResizer8=function(t,u){'use strict';var v=new (c('SimpleDrag'))(t);v.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));v.subscribe(['update','end'],this.$SidebarAppTickerResizer22.bind(this));var w=new (c('SimpleDrag'))(u);w.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));w.subscribe('update',this.$SidebarAppTickerResizer23.bind(this));w.subscribe('end',this.$SidebarAppTickerResizer24.bind(this));};s.prototype.$SidebarAppTickerResizer21=function(t,event){'use strict';this.$SidebarAppTickerResizer25=event.clientY;this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer26();};s.prototype.$SidebarAppTickerResizer14=function(){'use strict';this.$SidebarAppTickerResizer20=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer17=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer16=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16;};s.prototype.$SidebarAppTickerResizer26=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer29=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer22=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,v=this.$SidebarAppTickerResizer18(event.clientY-this.$SidebarAppTickerResizer25,this.$SidebarAppTickerResizer15()-u);if(t=='end'){this.$SidebarAppTickerResizer29();this.$SidebarAppTickerResizer19(v);}c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};s.prototype.$SidebarAppTickerResizer23=function(t,event){'use strict';var u=-this.$SidebarAppTickerResizer16,v=this.$SidebarAppTickerResizer6()-this.$SidebarAppTickerResizer16,w=this.$SidebarAppTickerResizer30(event.clientY-this.$SidebarAppTickerResizer25,u,v);this.$SidebarAppTickerResizer18(-w,this.$SidebarAppTickerResizer15());this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16+w;this.$SidebarAppTickerResizer28=Math.max(j,this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer28+'px';};s.prototype.$SidebarAppTickerResizer24=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer28,v=this.$SidebarAppTickerResizer31(this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer7(v);var w=this.$SidebarAppTickerResizer18(this.$SidebarAppTickerResizer16-v,this.$SidebarAppTickerResizer15());if(this.$SidebarAppTickerResizer16!=v){this.$SidebarAppTickerResizer32(v);this.$SidebarAppTickerResizer19(w);}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',u).to('height',v).duration(n).go();};s.prototype.$SidebarAppTickerResizer7=function(t){'use strict';if(!this.$SidebarAppTickerResizer5)return;var u="_3qrt",v=document.getElementsByClassName(u),w='';if(t==this.$SidebarAppTickerResizer33()){w='inline';}else w='';for(var x=0;x<v.length;x++)v[x].style.display=w;};s.prototype.$SidebarAppTickerResizer18=function(t,u){'use strict';var v=this.$SidebarAppTickerResizer27+t,w=v/this.$SidebarAppTickerResizer17*100;w=Math.max(i,Math.min(u,w));this.$SidebarAppTickerResizer1.style.height=w+'%';if(w!=i){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer12();}return w;};s.prototype.$SidebarAppTickerResizer31=function(t){'use strict';var u=this.$SidebarAppTickerResizer33(),v=this.$SidebarAppTickerResizer6();return t<v-o?t<u-o?j:u:v;};s.prototype.$SidebarAppTickerResizer33=function(){'use strict';return k;};s.prototype.$SidebarAppTickerResizer6=function(){'use strict';if(this.$SidebarAppTickerResizer5){return m;}else return l;};s.prototype.$SidebarAppTickerResizer34=function(t){'use strict';var u=this.$SidebarAppTickerResizer6();return t<0?j:t>u?u:t;};s.prototype.$SidebarAppTickerResizer30=function(t,u,v){'use strict';return t<u?u:t>v?v:t;};s.prototype.$SidebarAppTickerResizer19=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+t}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized');};s.prototype.$SidebarAppTickerResizer32=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+t}).setMethod('POST').send();};s.prototype.$SidebarAppTickerResizer35=function(t){'use strict';var u=this.$SidebarAppTickerResizer27,v=this.$SidebarAppTickerResizer17*t/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',u).to('height',v).duration(r).ondone(function(){this.$SidebarAppTickerResizer1.style.height=t+'%';this.$SidebarAppTickerResizer19(t===0?'0.0':t);c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}.bind(this)).go();};s.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer35(0);};s.prototype.$SidebarAppTickerResizer11=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer14();var t=(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q-this.$SidebarAppTickerResizer16)*50/this.$SidebarAppTickerResizer17;this.$SidebarAppTickerResizer35(t);}.bind(this));};f.exports=s;}),null);
__d('VideoCallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoCallLoggerConfig',this.$VideoCallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoCallLoggerConfig',this.$VideoCallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoCallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoCallTypedLogger1=babelHelpers['extends']({},this.$VideoCallTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$VideoCallTypedLogger1.event=j;return this;};h.prototype.setMessage=function(j){this.$VideoCallTypedLogger1.message=j;return this;};var i={event:true,message:true};f.exports=h;}),null);
__d('ChatVideoCallButton.react',['cx','fbt','invariant','Bootloader','FBID','FBRTCCallabilityStore','FBRTCCore','Keys','LayerFadeOnHide','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadIDMap','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','TrackingNodes','FBRTCLogger','VideoCallTypedLogger','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreadIDMap').get(),l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n={isCallable:false,shown:false,user:null},o=c('React').createClass({displayName:'ChatVideoCallButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('FBRTCCallabilityStore'),c('MercuryParticipants'))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return {shown:true,rtcCallData:{call_state:'NO_ONGOING_CALL'}};},statics:{calculateState:function p(q){if(!q.threadID)return babelHelpers['extends']({},n);if(q.isGroupChat)return {isCallable:true,shown:q.shown,user:null};var r=c('MercuryIDs').getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c('FBID').isUser(r))return babelHelpers['extends']({},n);r&&c('FBID').isUser(r)||j(0);var s=c('MercuryIDs').getParticipantIDFromUserID(r),t=c('MercuryParticipants').getOrFetch(s);return {isCallable:c('FBRTCCallabilityStore').isCallable(r),shown:q.shown,user:t};}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("Start a group call"):i._("Start a group video chat");var q=this.state.user;if(!q)return undefined;return this.props.isAudio?c('FBRTCCallabilityStore').voiceCallButtonTooltip(q.fbid,q.short_name):c('FBRTCCallabilityStore').callButtonTooltip(q.fbid,q.short_name);},render:function p(){if(!this.state.shown)return null;var q=c('TrackingNodes').getTrackingInfo(this.props.isAudio?c('TrackingNodes').types.VIDEOCHAT:c('TrackingNodes').types.VOICECHAT),r=JSON.stringify({videochat:'call_clicked_bhat_tab'});return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.getTooltipLabel(),className:"button"+(' '+"_3olv")+(this.props.isAudio?' '+"_2fpc":'')+(!this.props.isAudio?' '+"_2fpd":'')+(this.state.isCallable?' '+"enabled":''),'data-ft':q,'data-gt':r,'data-hover':'tooltip','data-tooltip-content':this.getTooltipLabel(),'data-tooltip-position':'above',onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:'button'}),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.button;}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:'auto'},i._("You can now make a group call.")));},_handleClick:function p(q){q.preventDefault();if(!this.state.isCallable)return;this.props.onRTCNuxCloseButtonClick();this._initiateCall();},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c('Keys').RETURN||!this.state.isCallable)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur();}this._initiateCall();},_initiateCall:function p(){var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?'audio':'video';if(s){if(c('MercuryIDs').isLocalThread(t)){k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v);}.bind(this));}else this._initiateGroupCall(c('MercuryIDs').getThreadFBIDFromThreadID(t));}else{c('FBRTCCore').startOutgoingCall(this.state.user.fbid,u,r);new (c('VideoCallTypedLogger'))().setEvent('chat_tab_call_click').log();}},_initiateGroupCall:function p(q){var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=='NO_ONGOING_CALL'&&v){c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+q,hasVideo:!s,serverInfoData:v,trigger:u!=='AUDIO_GROUP_CALL'?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return;}c('Bootloader').loadModules(["FBRTCSupport","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController","RTCGroupCallUtils"],function(w,x,y,z){if(!w.isGroupCallWebtrcSupported()){x.render({hasVideo:!this.props.isAudio});return;}z.getThread(q,function(aa,ba){y.render({participants:ba['delete'](c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)),thread:aa,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:'GROUP:'+q,hasVideo:!this.props.isAudio});}.bind(this));}.bind(this),'ChatVideoCallButton.react');}});f.exports=o;}),null);
__d('FantaTabMainPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_59v1"},c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")},c('React').createElement('div',{className:"_3_9e"+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(' '+"opened")+(' '+"_27_3")},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement('div',{className:"_5-kq"},c('React').createElement(c('XUISpinner.react'),null))))))));};f.exports=i;}),null);
__d('FantaTabsSlimApp',['Bootloader','BootloadOnRender.react','ChatPerfInstrumentation','FantaTabMainPlaceholder.react','FantaTabsAppBase','JSResource','LazyComponent.react','MercuryConfig','React','ReactDOM','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r);});});}else this.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r);});});});}.bind(this),m;}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1){l();}else this.$FantaTabsSlimApp2(l);};k.prototype.getViewComponent=function(){if(c('MercuryConfig').FantaTabView){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabsWithMain.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement(c('FantaTabMainPlaceholder.react'),null)});}else return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabs.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement('div',null)});};k.prototype.initializeFantaData=function(l){e(['FantaCookieUtil','MercuryServerPayloadPreprocessor','MercuryThreadInformer','PresenceState'],function(m,n,o,p){p.registerStateLoader(function(q){var r,s=this;if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaTabActions',function(t){c('ifRequired')('FantaAppStore',function(u){t.loadFromData(m.convertCookieData(q,u.getState().tabGroup));});});}else (function(){var t=m.convertCookieData(q);if(t.tabs.length>0)s.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaTabActions',function(u){u.loadFromData(t);});});})();}.bind(this));p.doSync();n.get().handleUpdate(l);if(c('MercuryConfig').FantaTabView)o.get().subscribe('threads-updated',function(q,r){c('ifRequired')('FantaGetMessageActions',function(s){Object.keys(r).forEach(function(t){c('setImmediate')(function(){s.refreshThread(t);});});});});c('ChatPerfInstrumentation').logInitData();}.bind(this));};k.prototype.$FantaTabsSlimApp2=function(l){c('ifRequired')('FantaAppStore',function(m){l();},function(){c('Bootloader').loadModules(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(m,n,o,p,q,r){r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s);}else return s;});m.addListener(function(){return r.doSync();});c('ReactDOM').render(this.getViewComponent(),this.tabsElem);q.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l();}.bind(this),'FantaTabsSlimApp');}.bind(this));};k.prototype.initializeFantaUI=function(){e(['FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c('ChatPerfInstrumentation').logInitUI();c('ChatPerfInstrumentation').logDisplayDone();}.bind(this));};f.exports=new k();}),null);
__d('MNCommerceActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h;}),null);
__d('MNCommerceDialogStateStore',['FluxStore','MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MNCommerceActionTypes').DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c('MNCommerceActionTypes').DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break;}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1;};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2;};f.exports=new j();}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j};}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null);}});f.exports=h;}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('FBRTCIceStatsParser',[],(function a(b,c,d,e,f,g){var h=null;i.getInstance=function(){'use strict';if(!h)h=new i();return h;};function i(){'use strict';}i.prototype.extractIceInfo=function(j){'use strict';var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)});}return k;};i.prototype.$FBRTCIceStatsParser1=function(j){'use strict';return j.indexOf('candidate:')>-1;};i.prototype.$FBRTCIceStatsParser2=function(j){'use strict';var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k;};i.prototype.$FBRTCIceStatsParser3=function(j){'use strict';var k=j.match(/typ (host|relay|srflx|prflx)/);if(k){return k[1];}else return 'unknown';};f.exports=i;}),null);
__d('FBRTCCallSummary',['FBRTCConstants','FBRTCIceStatsParser','FBRTCLogger','FBRTCUtils','SiteData','UserAgentData','performanceNow'],(function a(b,c,d,e,f,g){var h=5*60*1000,i={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};j.CURRENT_SUMMARY_VERSION=19;function j(k){'use strict';this.peerID=k.peerID;this.callID=k.callID;this.$FBRTCCallSummary1=k.isCaller;this.$FBRTCCallSummary2=c('FBRTCUtils').getLocalUploadLogLevel();this.$FBRTCCallSummary3=new Date().valueOf();this.$FBRTCCallSummary4=null;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11=null;this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17={};this.$FBRTCCallSummary18=null;this.$FBRTCCallSummary19=c('performanceNow')();this.$FBRTCCallSummary20=0;this.$FBRTCCallSummary21={};this.$FBRTCCallSummary22=this.$FBRTCCallSummary19;this.$FBRTCCallSummary23=0;this.$FBRTCCallSummary24={};this.addExtraInfo(c('FBRTCLogger').Key.DEVICE_INFO,this.$FBRTCCallSummary25());this.$FBRTCCallSummary26();this.$FBRTCCallSummary27=c('FBRTCIceStatsParser').getInstance();this.$FBRTCCallSummary28=c('FBRTCLogger').getInstance();}j.prototype.toJsonString=function(){'use strict';this.$FBRTCCallSummary10=new Date().valueOf();return JSON.stringify({version:j.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary18,callType:this.$FBRTCCallSummary29,conferenceName:this.$FBRTCCallSummary30,serverInfoData:this.$FBRTCCallSummary31,localVideoDuration:this.$FBRTCCallSummary32,remoteVideoDuration:this.$FBRTCCallSummary33,startTime:this.$FBRTCCallSummary3,trigger:this.$FBRTCCallSummary4,signalingTime:this.$FBRTCCallSummary5,endCallReason:this.$FBRTCCallSummary6,endCallSubreason:this.$FBRTCCallSummary7,isRemoteEnded:this.$FBRTCCallSummary8,lastUpdatedTime:this.$FBRTCCallSummary9,lastSerializedTime:this.$FBRTCCallSummary10,unsetOnRetrieve:this.$FBRTCCallSummary11,openCount:this.$FBRTCCallSummary23,extraInfo:this.$FBRTCCallSummary24,pcStats:this.$FBRTCCallSummary12,captureStats:this.$FBRTCCallSummary13,gen0IceSentCount:this.$FBRTCCallSummary14,gen0IceReceivedCount:this.$FBRTCCallSummary15,iceSentCount:this.$FBRTCCallSummary16,iceReceivedCount:this.$FBRTCCallSummary17,newSignalingTime:this.$FBRTCCallSummary21,accumulatedCallTime:this.$FBRTCCallSummary34()});};j.fromJsonString=function(k){'use strict';var l;try{l=JSON.parse(k);}catch(n){return null;}if(l.version!==j.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(l,'peerID')||!Object.prototype.hasOwnProperty.call(l,'callID')||!Object.prototype.hasOwnProperty.call(l,'isCaller')||!Object.prototype.hasOwnProperty.call(l,'startTime')||!Object.prototype.hasOwnProperty.call(l,'trigger')||!Object.prototype.hasOwnProperty.call(l,'signalingTime')||!Object.prototype.hasOwnProperty.call(l,'endCallReason')||!Object.prototype.hasOwnProperty.call(l,'isRemoteEnded')||!Object.prototype.hasOwnProperty.call(l,'lastUpdatedTime')||!Object.prototype.hasOwnProperty.call(l,'lastSerializedTime'))return null;var m=new j({peerID:l.peerID,callID:l.callID,isCaller:l.isCaller});m.$FBRTCCallSummary2=l.uploadLogLevel;m.$FBRTCCallSummary18=l.clientVersion;m.$FBRTCCallSummary3=l.startTime;m.$FBRTCCallSummary4=l.trigger;m.$FBRTCCallSummary5=l.signalingTime;m.$FBRTCCallSummary6=l.endCallReason;m.$FBRTCCallSummary7=l.endCallSubreason;m.$FBRTCCallSummary8=l.isRemoteEnded;m.$FBRTCCallSummary9=l.lastUpdatedTime;m.$FBRTCCallSummary10=l.lastSerializedTime;if(l.callType)m.$FBRTCCallSummary29=l.callType;if(l.conferenceName)m.$FBRTCCallSummary30=l.conferenceName;if(l.serverInfoData)m.$FBRTCCallSummary31=l.serverInfoData;if(l.localVideoDuration)m.$FBRTCCallSummary32=l.localVideoDuration;if(l.remoteVideoDuration)m.$FBRTCCallSummary33=l.remoteVideoDuration;if(l.unsetOnRetrieve)m.$FBRTCCallSummary11=l.unsetOnRetrieve;if(l.openCount)m.$FBRTCCallSummary23=l.openCount;if(l.extraInfo)m.$FBRTCCallSummary24=l.extraInfo;if(l.pcStats)m.$FBRTCCallSummary12=l.pcStats;if(l.captureStats)m.$FBRTCCallSummary13=l.captureStats;if(l.gen0IceSentCount)m.$FBRTCCallSummary14=l.gen0IceSentCount;if(l.gen0IceReceivedCount)m.$FBRTCCallSummary15=l.gen0IceReceivedCount;if(l.iceSentCount)m.$FBRTCCallSummary16=l.iceSentCount;if(l.iceReceivedCount)m.$FBRTCCallSummary17=l.iceReceivedCount;if(l.newSignalingTime)m.$FBRTCCallSummary21=l.newSignalingTime;if(l.accumulatedCallTime)m.$FBRTCCallSummary20=l.accumulatedCallTime;return m;};j.restoreOrInitialize=function(k,l,m,n,o){'use strict';var p=k.retrieveCallSummary(l,m);if(!p){p=new j({peerID:l,callID:m,isCaller:n});if(o){p.onFullMessageReceived({msg:o});p.onOfferAckSent(o);}else p.onCallStarted(c('FBRTCLogger').Trigger.UNKNOWN);c('FBRTCLogger').getInstance().logError(l,m,'Missing call summary from storage');}else if(p.$FBRTCCallSummary11){p.$FBRTCCallSummary6=null;p.$FBRTCCallSummary7=null;p.$FBRTCCallSummary8=null;delete p.$FBRTCCallSummary5[i.CALL_ENDED];delete p.$FBRTCCallSummary21[i.CALL_ENDED];p.$FBRTCCallSummary11=null;}return p;};j.logSavedSummaries=function(k){'use strict';var l=k.getLoggableSummaries(),m=l.length;if(m<=0)return;var n=c('FBRTCLogger').getInstance(),o=[];for(var p=0;p<m;p++){var q=l[p];n.logEndCallSummary(q);o.push({peerID:q.peerID,callID:q.callID});}k.removeCallSummaries(o);n.logToConsole('Logged pending summaries: '+m);};j.prototype.save=function(k){'use strict';var l=c('performanceNow')(),m=l-this.$FBRTCCallSummary22;if(m>h){this.$FBRTCCallSummary28.logInfo(this.peerID,this.callID,'Summary too old: '+m);return;}k.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary22=l;};j.prototype.getLastUpdatedTime=function(){'use strict';return this.$FBRTCCallSummary9;};j.prototype.setLastUpdatedTime=function(k){'use strict';this.$FBRTCCallSummary9=k;};j.prototype.getExtraInfo=function(){'use strict';return this.$FBRTCCallSummary24;};j.prototype.addExtraInfo=function(k,l){'use strict';this.$FBRTCCallSummary24[k]=l;this.$FBRTCCallSummary26();};j.prototype.isCaller=function(){'use strict';return this.$FBRTCCallSummary1;};j.prototype.isNetworkReady=function(){'use strict';if(this.$FBRTCCallSummary5[i.NETWORK_READY]){return true;}else return false;};j.prototype.isAnswerReceived=function(){'use strict';if(this.$FBRTCCallSummary5[i.RECV_ANSWER]){return true;}else return false;};j.prototype.onCallStarted=function(k){'use strict';this.$FBRTCCallSummary4=k;this.$FBRTCCallSummary35(i.CALL_STARTED);this.$FBRTCCallSummary26();};j.prototype.onPopupOpened=function(){'use strict';this.$FBRTCCallSummary35(i.POPUP_OPENED);this.$FBRTCCallSummary23++;this.$FBRTCCallSummary26();};j.prototype.setPcStats=function(k){'use strict';this.$FBRTCCallSummary12=k;this.$FBRTCCallSummary26();};j.prototype.setVideoCaptureStats=function(k,l){'use strict';this.$FBRTCCallSummary13={w:k,h:l};this.$FBRTCCallSummary26();};j.prototype.setUploadLogLevel=function(k){'use strict';this.$FBRTCCallSummary2=k;this.$FBRTCCallSummary26();};j.prototype.setCallType=function(k){'use strict';this.$FBRTCCallSummary29=k;this.$FBRTCCallSummary26();};j.prototype.setVideoDurations=function(k,l){'use strict';this.$FBRTCCallSummary32=k;this.$FBRTCCallSummary33=l;this.$FBRTCCallSummary26();};j.prototype.setConferenceName=function(k){'use strict';this.$FBRTCCallSummary30=k;this.$FBRTCCallSummary26();};j.prototype.setServerInfoData=function(k){'use strict';this.$FBRTCCallSummary31=k;this.$FBRTCCallSummary26();};j.prototype.onOfferAckSent=function(k){'use strict';this.onMessageSent({type:c('FBRTCConstants').PayloadType.OFFER_ACK,flag:k.flag});};j.prototype.onMessageSent=function(k){'use strict';var l=k.flag===1;switch(k.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary36(l,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary37(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary36(l,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary37(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary35(i.SENT_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary35(i.SENT_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary36(l,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary36(l,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary37(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary26();};j.prototype.$FBRTCCallSummary37=function(k,l,m){'use strict';var n=null,o=null,p=this.$FBRTCCallSummary27.extractIceInfo(k.sdp);for(var q=0;q<p.length;q++){n=p[q].gen;o=p[q].type;if(n===0)this.$FBRTCCallSummary38(l,o);this.$FBRTCCallSummary38(m,o);}};j.prototype.$FBRTCCallSummary38=function(k,l){'use strict';if(!k[l]){k[l]=1;}else k[l]=k[l]+1;};j.prototype.$FBRTCCallSummary39=function(k){'use strict';if(k.isFromMobile())this.addExtraInfo(c('FBRTCLogger').Key.PEER_IS_MOBILE,'1');};j.prototype.onFullMessageReceived=function(k){'use strict';var l=k.msg,m=l.flag===1;switch(l.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary39(k);this.$FBRTCCallSummary36(m,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary37(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary39(k);this.$FBRTCCallSummary36(m,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary37(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary35(i.RECV_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary35(i.RECV_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary36(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary36(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary37(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;default:}this.$FBRTCCallSummary26();};j.prototype.onMsgAckReceived=function(k,l){'use strict';var m=k.msg.flag===1;if(l){this.$FBRTCCallSummary36(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);}else this.$FBRTCCallSummary36(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);};j.prototype.onNetworkReady=function(){'use strict';this.$FBRTCCallSummary35(i.NETWORK_READY);this.$FBRTCCallSummary26();};j.prototype.onCallConnected=function(){'use strict';this.$FBRTCCallSummary35(i.CALL_CONNECTED);this.$FBRTCCallSummary26();};j.prototype.onCallEnded=function(k,l,m,n){'use strict';this.$FBRTCCallSummary11=m;this.$FBRTCCallSummary6=k;this.$FBRTCCallSummary7=n;this.$FBRTCCallSummary8=l;this.$FBRTCCallSummary35(i.CALL_ENDED);this.$FBRTCCallSummary26();};j.prototype.setOfferSentTime=function(){'use strict';this.$FBRTCCallSummary35(i.SENT_OFFER);};j.prototype.setOfferAckReceivedTime=function(){'use strict';this.$FBRTCCallSummary35(i.RECV_OFFER_ACK);};j.prototype.setAnswerSentTime=function(){'use strict';this.$FBRTCCallSummary35(i.SENT_ANSWER);};j.prototype.setAnswerReceivedTime=function(){'use strict';this.$FBRTCCallSummary35(i.RECV_ANSWER);};j.prototype.toString=function(){'use strict';var k={};k.core_metrics=this.$FBRTCCallSummary40();k.time_series=null;return JSON.stringify(k);};j.prototype.$FBRTCCallSummary40=function(){'use strict';var k={};k.ver=j.CURRENT_SUMMARY_VERSION;k.log_level=c('FBRTCConstants').uploadLogLevelString(this.$FBRTCCallSummary2);k.caller=this.$FBRTCCallSummary1;k.call_type=this.$FBRTCCallSummary29;k.conf_name=this.$FBRTCCallSummary30;k.serv_info=this.$FBRTCCallSummary31;k.conn=this.$FBRTCCallSummary41();k.peer_id=this.peerID;k.has_video=true;k.open_count=this.$FBRTCCallSummary23;k.signaling=this.$FBRTCCallSummary42();k.sender=this.$FBRTCCallSummary43();k.receiver=this.$FBRTCCallSummary44();k.end=this.$FBRTCCallSummary45();k.video=this.$FBRTCCallSummary46();k.push_phase=c('SiteData').push_phase;k.client_version=this.$FBRTCCallSummary18;return k;};j.prototype.$FBRTCCallSummary41=function(){'use strict';var k={dtls:1};if(this.$FBRTCCallSummary12.sender&&this.$FBRTCCallSummary12.sender.rtt)k.rtt=this.$FBRTCCallSummary12.sender.rtt;return k;};j.prototype.$FBRTCCallSummary42=function(){'use strict';var k={};if(this.$FBRTCCallSummary4)k.trigger=this.$FBRTCCallSummary4;k.start_time=this.$FBRTCCallSummary3;k.time_from_start=this.$FBRTCCallSummary5;var l=this.$FBRTCCallSummary5[i.CALL_CONNECTED],m=this.$FBRTCCallSummary5[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary10){m=this.$FBRTCCallSummary10-this.$FBRTCCallSummary3;}else m=this.$FBRTCCallSummary47();var n=m-l;if(n>0)k.duration=n;}k.new_time_from_start=this.$FBRTCCallSummary21;l=this.$FBRTCCallSummary21[i.CALL_CONNECTED];m=this.$FBRTCCallSummary21[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary20>0){m=this.$FBRTCCallSummary20;}else m=this.$FBRTCCallSummary34();n=m-l;if(n>0)k.new_duration=n;}return k;};j.prototype.$FBRTCCallSummary43=function(){'use strict';var k={};if(this.$FBRTCCallSummary14)k.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)k.ice=this.$FBRTCCallSummary16;if(this.$FBRTCCallSummary12.sender)Object.assign(k,this.$FBRTCCallSummary12.sender);return k;};j.prototype.$FBRTCCallSummary44=function(){'use strict';var k={};if(this.$FBRTCCallSummary15)k.ice_g0=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary17)k.ice=this.$FBRTCCallSummary17;return k;};j.prototype.$FBRTCCallSummary45=function(){'use strict';var k={};if(this.$FBRTCCallSummary6!==null){k.end_call_reason_string=c('FBRTCConstants').callEndReasonString(this.$FBRTCCallSummary6);if(this.$FBRTCCallSummary7!==null)k.end_call_subreason_string=this.$FBRTCCallSummary7;k.remote_ended=this.$FBRTCCallSummary8;}if(this.$FBRTCCallSummary12.end)Object.assign(k,this.$FBRTCCallSummary12.end);return k;};j.prototype.$FBRTCCallSummary46=function(){'use strict';var k={capture:{}};if(this.$FBRTCCallSummary12.video&&this.$FBRTCCallSummary12.video.sender)Object.assign(k,this.$FBRTCCallSummary12.video.sender);if(this.$FBRTCCallSummary13)Object.assign(k.capture,this.$FBRTCCallSummary13);return {sender:k,ld:this.$FBRTCCallSummary32,rd:this.$FBRTCCallSummary33};};j.prototype.$FBRTCCallSummary47=function(){'use strict';return new Date().valueOf()-this.$FBRTCCallSummary3;};j.prototype.$FBRTCCallSummary34=function(){'use strict';var k=c('performanceNow')()-this.$FBRTCCallSummary19;return Math.floor(this.$FBRTCCallSummary20+k);};j.prototype.$FBRTCCallSummary35=function(k){'use strict';if(this.$FBRTCCallSummary5[k])return;this.$FBRTCCallSummary5[k]=this.$FBRTCCallSummary47();this.$FBRTCCallSummary21[k]=this.$FBRTCCallSummary34();};j.prototype.$FBRTCCallSummary36=function(k,l,m){'use strict';if(k){this.$FBRTCCallSummary35(m);}else this.$FBRTCCallSummary35(l);};j.prototype.$FBRTCCallSummary26=function(){'use strict';this.$FBRTCCallSummary9=new Date().valueOf();};j.prototype.$FBRTCCallSummary25=function(){'use strict';return {device:c('UserAgentData').deviceName,os:c('UserAgentData').platformName,os_version:c('UserAgentData').platformFullVersion,browser:c('UserAgentData').browserName,browser_version:c('UserAgentData').browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth};};j.prototype.setClientVersion=function(k){'use strict';this.$FBRTCCallSummary18=k;};f.exports=j;}),null);
__d('FBRTCCallSummaryStore',['CacheStorage','FBRTCCallSummary','FBRTCLogger','areEqual'],(function a(b,c,d,e,f,g){var h='localstorage',i='RTC_CALL_SUMMARY_',j='summary',k=2000,l=3,m=3*60*1000,n=null;o.getInstance=function(){'use strict';if(!n)n=new o();return n;};function o(){'use strict';this.$FBRTCCallSummaryStore1=new (c('CacheStorage'))(h,i);this.$FBRTCCallSummaryStore2=c('FBRTCLogger').getInstance();}o.prototype.storeCallSummary=function(p,q,r){'use strict';var s=this;this.$FBRTCCallSummaryStore3(function(t){if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole('Outdated summaries');return null;}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t;},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q));};o.prototype.retrieveCallSummary=function(p,q){'use strict';var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s){return this.$FBRTCCallSummaryStore4(s);}else return null;};o.prototype.removeCallSummary=function(p,q){'use strict';this.removeCallSummaries([{peerID:p,callID:q}]);};o.prototype.removeCallSummaries=function(p){'use strict';var q=this;this.$FBRTCCallSummaryStore3(function(r){var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u];}}return r;},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null));};o.prototype.getLoggableSummaries=function(){'use strict';var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t);}return q;};o.prototype.$FBRTCCallSummaryStore7=function(p){'use strict';for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true;};o.prototype.$FBRTCCallSummaryStore5=function(p){'use strict';var q={__t:Date.now(),__d:p.toJsonString()};return q;};o.prototype.$FBRTCCallSummaryStore4=function(p,q){'use strict';if(p)if(!q||Date.now()-p.__t>=q)return c('FBRTCCallSummary').fromJsonString(p.__d);return null;};o.prototype.$FBRTCCallSummaryStore6=function(){'use strict';var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p;};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){'use strict';if(r===undefined||r===null)r=l;var t=this.$FBRTCCallSummaryStore6(),u=this.$FBRTCCallSummaryStore6(),v=p(t);if(v===null)return;var w=this.$FBRTCCallSummaryStore6();if(c('areEqual')(u,w)){this.$FBRTCCallSummaryStore1.set(j,v);this.$FBRTCCallSummaryStore2.logToConsole('Updated summaries');}else if(r>0){q('Retry lock');if(s){var x=this;setTimeout(function(){x.$FBRTCCallSummaryStore3(p,q,r-1,true);},k);}else this.$FBRTCCallSummaryStore3(p,q,r-1,true);}else q('Failed to lock');};f.exports=o;}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j);});}};f.exports=h;}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),l;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('legacy:CompactTypeaheadRenderer',['CompactTypeaheadRenderer'],(function a(b,c,d,e,f,g){if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.compact=c('CompactTypeaheadRenderer');}),3);